[
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Sales Invoice", 
  "modified": "2018-12-09 12:16:06.484685", 
  "name": "Sales Invoice-Client", 
  "script": "\nfrappe.ui.form.on(\"Empties Only\", \"rate\", function(frm,cdt,cdn) {\n\tcur_frm.cscript.calculate_taxes_and_totals()\n})\n\nfrappe.ui.form.on(\"Empties Only\", \"quantity\", function(frm,cdt,cdn) {\n\tcur_frm.cscript.calculate_taxes_and_totals()\n})\n\nfrappe.ui.form.on(\"Empties Only\", \"empties_only_remove\", function(frm,cdt,cdn) {\n\tcur_frm.cscript.calculate_taxes_and_totals()\n})\n\n\nfrappe.ui.form.on(\"Empties Only\", {\n\titem: function(frm, cdt, cdn) {\n\t\tvar child = locals[cdt][cdn].item;\n\t\tfrappe.model.set_value(cdt, cdn, 'rate', 0);\n\t\n\t\tvar rate = 0;\n\t\t\n\t\tme.frm.call({\n\t\t\tmethod: \"frappe.client.get_value\",\n\t\t\targs: {\n\t\t\t\tdoctype: \"Item Price\",\n\t\t\t\tfieldname: \"price_list_rate\",\n\t\t\t\tfilters: { item_code: child, price_list : ['RETAIL/VSM', 'BULKBREAKER', 'FIELD RETAIL', 'Empties', 'Standard Selling']},\n\t\t\t},\n\t\t\tcallback: function(r, rt) {\n\t\t\t\tconsole.log(r);\n//\t\t\t\tconsole.log(rt);\n\t\t\t\tif(r.message) {\n\t\t\t\t\trate = parseFloat(r.message.price_list_rate);\n//\t\t\t\t\tconsole.log(rate);\n\t\t\t\t\tconsole.log(cdt+'     '+cdn);\n\t\t\t\t\tfrappe.model.set_value(cdt, cdn, 'rate', rate)\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t\n\t}\n})\n", 
  "script_type": "Client"
 }
]